# Analyzer Configuration
# This configuration demonstrates the analysis system for a given dataset

# Input Configuration
input:
  name: "huggingfaceh4/ultrachat_200k"  # Dataset name
  split: "train_sft"  # Dataset split
  max_conversations: 1000  # Limit to first 1000 conversations (optional)
  schema:
    type: "conversation"  # Dataset schema type

# Output Configuration
outputs:
  path: "./analysis_results"
  analysis_output: "analysis_results_[timestamp].parquet"
  aggregation_output: "aggregations_results_[timestamp].json"
  save_format: "json"  # Format for output files (json, yaml, csv, parquet)

# Sample-Level Metrics Configuration
sample_level_metrics:
  language:
    enabled: true
    confidence_threshold: 0.2
    top_k: 3
    multilingual_flag:
      enabled: true
      min_num_languages: 2

  length:
    enabled: true
    token_count: false
    char_count: true
    word_count: true
    sentence_count: true

  safety:
    enabled: true

    profanity:
      enabled: true
      include_default: true
      custom_keywords: []
      custom_regexes: []

    slurs:
      enabled: true
      include_default: true
      custom_keywords: []
      custom_regexes: []

    explicit:
      enabled: true
      include_default: true
      custom_keywords: []
      custom_regexes: []

    hate_speech:
      enabled: true
      include_default: true
      custom_keywords: []
      custom_regexes: []

    pii:
      enabled: true
      include_default: true
      custom_keywords: []
      custom_regexes: []

# Aggregation Metrics Configuration
aggregation_metrics:
  language:
    distribution:
      enabled: true
      min_samples: 10
      report_top_n: 10  # Limits the summary output to the top n most frequent languages
      include_other_bucket: true

    minority_alert:
      enabled: true
      threshold_percent: 5.0

    confidence_statistics:
      enabled: true
      stats: [mean, stddev, percentile_10, percentile_90]

    multilingual_samples:
      enabled: true
      common_language_pairs: true

# Additional Analysis Parameters
verbose: true
analysis_kwargs:
  custom_parameter: "value"
  another_parameter: 42
