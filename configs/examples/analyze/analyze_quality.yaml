# Quality Analysis Configuration
# This configuration focuses on data quality and safety checks.
#
# The quality analyzer detects:
# - PII (emails, phone numbers, SSNs, credit cards, API keys)
# - Encoding issues (mojibake, invalid characters)
# - Special token leakage (e.g., <|endoftext|>, [INST])
# - Repetitive content
# - Language (optional, requires langdetect package)
#
# Usage:
#   oumi analyze --config configs/examples/analyze/analyze_quality.yaml

# Dataset configuration
dataset_name: "yahma/alpaca-cleaned"
split: "train"
sample_count: 500  # Analyze first 500 samples

# Output configuration
output_path: "./analysis_output/quality"

# Recommendation settings
generate_recommendations: true
outlier_threshold: 3.0

# Report generation
generate_report: true
report_title: "Dataset Quality & Safety Analysis"

# Quality-focused analyzers
analyzers:
  # Basic length metrics for context (uses tiktoken o200k_base by default)
  - id: "length"
    params:
      char_count: false
      word_count: false
      sentence_count: false
      token_count: true  # Uses tiktoken o200k_base (GPT-4o/GPT-5 encoding)

  # Quality analyzer - the main focus
  - id: "quality"
    params:
      # PII Detection
      detect_pii: true
      detect_emails: true
      detect_phones: true
      detect_ssn: true
      detect_credit_cards: true
      detect_ip_addresses: false  # Often legitimate in technical content
      detect_api_keys: true

      # Content Quality
      detect_encoding_issues: true
      detect_special_tokens: true

      # Repetition Detection
      detect_repetition: true
      repetition_ngram_size: 3  # Check 3-gram repetition
      repetition_threshold: 0.3  # Flag if >30% repeated

      # Language Detection (requires: pip install langdetect)
      detect_language: false

      # Composite Score
      compute_quality_score: true
