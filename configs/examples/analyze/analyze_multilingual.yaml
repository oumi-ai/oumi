# Multilingual Dataset Analysis Configuration
# Usage: oumi analyze --config configs/examples/analyze/analyze_multilingual.yaml
#
# This configuration is optimized for analyzing multilingual datasets,
# using FastText for fast, accurate language detection.
#
# Features:
#   - Language detection for 176+ languages (FastText-based)
#   - Script detection (Latin, Cyrillic, CJK, Arabic, etc.)
#   - Multi-language content detection
#   - Language distribution analysis
#   - 80x faster than langdetect, works offline
#
# Requirements:
#   pip install 'oumi[analyze]'  # Includes fast-langdetect
#
# Output files:
#   - message_analysis.csv: Per-message metrics with language info
#   - conversation_analysis.csv: Per-conversation aggregated metrics
#   - analysis_summary.json: Statistical summary with language distribution
#   - analysis_report.html: Interactive HTML report

# Dataset configuration
dataset_name: yahma/alpaca-cleaned
split: train
sample_count: 1000

# Or use a local file
# dataset_path: data/my_multilingual_dataset.jsonl

# Output configuration
output_path: ./analysis_output/multilingual
generate_report: true
report_title: "Multilingual Dataset Analysis"

# Recommendation settings
generate_recommendations: true
outlier_threshold: 3.0

analyzers:
  # FastText-based language detection (fast, offline, accurate)
  # This is 80x faster than langdetect and supports 176+ languages
  - id: fasttext
    params:
      detect_language: true         # Detect primary language (ISO 639-1 code)
      detect_script: true           # Detect writing script (latin, cyrillic, etc.)
      detect_multilingual: true     # Check for mixed language content
      min_confidence: 0.0           # Report all detections
      low_confidence_threshold: 0.5 # Flag low confidence detections
      use_fast_langdetect: true     # Use fast-langdetect (recommended)

  # Length metrics with token counting
  - id: length
    params:
      char_count: true              # Useful for CJK languages
      word_count: true
      sentence_count: false
      token_count: true             # Uses tiktoken o200k_base

  # Diversity - important for multilingual content
  - id: diversity
    params:
      unique_words_ratio: true
      type_token_ratio: true
      vocabulary_richness: true
      hapax_legomena_ratio: true
      case_sensitive: true          # Some languages are case-sensitive

  # Quality with encoding checks (critical for multilingual)
  - id: quality
    params:
      detect_pii: true
      detect_emails: true
      detect_phones: true
      detect_ssn: false             # US-specific, disable for intl
      detect_credit_cards: true
      detect_api_keys: true
      detect_encoding_issues: true  # Critical for multilingual!
      detect_special_tokens: true
      detect_repetition: true
      repetition_ngram_size: 3
      repetition_threshold: 0.3
      compute_quality_score: true

  # Training quality metrics
  - id: training_quality
    params:
      compute_instruction_clarity: true
      compute_response_completeness: true
      compute_turn_quality: true

# Note: FastText supports 176+ languages including:
# European: en, es, fr, de, it, pt, ru, nl, pl, cs, sv, da, fi, no, uk, el, ro, hu, bg, etc.
# Asian: zh, ja, ko, vi, th, hi, ar, he, fa, bn, ta, te, ml, mr, etc.
# African: sw, am, yo, zu, etc.
# And many more...
#
# Output columns:
# - text_content_fasttext_detected_language: ISO 639-1 code (e.g., "en", "zh")
# - text_content_fasttext_language_confidence: 0-1 confidence score
# - text_content_fasttext_language_name: Human-readable name ("English", "Chinese")
# - text_content_fasttext_detected_script: Writing system (latin, cyrillic, cjk, etc.)
# - text_content_fasttext_is_multilingual: Whether text contains multiple languages
# - text_content_fasttext_low_confidence: Flag for low confidence detections
