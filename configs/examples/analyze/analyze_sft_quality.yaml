# SFT Quality Analysis Configuration
# This configuration uses the sft_quality preset for comprehensive analysis
# of supervised fine-tuning (instruction tuning) datasets.
#
# The preset includes:
# - Length Analyzer: Character, word, and sentence counts
# - Diversity Analyzer: Vocabulary richness metrics (TTR, unique words ratio)
# - Format Analyzer: Markdown, code blocks, JSON detection
# - Quality Analyzer: PII detection, encoding issues, special tokens, repetition
#
# Usage:
#   oumi analyze --config configs/examples/analyze/analyze_sft_quality.yaml
#
# To enable token counting, add:
#   tokenizer_name: "meta-llama/Llama-3.1-8B"
#
# To enable language detection, install langdetect and add:
#   analyzers[3].params.detect_language: true

# Dataset configuration
dataset_name: "yahma/alpaca-cleaned"
split: "train"
sample_count: 1000  # Analyze first 1000 samples

# Output configuration
output_path: "./analysis_output"

# Recommendation settings
generate_recommendations: true
outlier_threshold: 3.0  # Standard deviations for outlier detection

# Report generation
generate_report: true
report_title: "SFT Dataset Quality Analysis"

# SFT Quality Preset Analyzers
# These are the same analyzers as get_preset("sft_quality")
analyzers:
  # Length analysis for understanding content size distribution
  - id: "length"
    params:
      char_count: true
      word_count: true
      sentence_count: true
      token_count: false  # Set to true and add tokenizer_name to enable

  # Diversity analysis for vocabulary richness
  - id: "diversity"
    params:
      unique_words_ratio: true
      type_token_ratio: true
      vocabulary_richness: true
      hapax_legomena_ratio: false
      case_sensitive: false

  # Format analysis for content structure
  - id: "format"
    params:
      detect_markdown: true
      detect_json: true
      detect_code_blocks: true
      detect_urls: true
      detect_emails: false
      compute_complexity: true

  # Quality analysis for safety and data issues
  - id: "quality"
    params:
      detect_pii: true
      detect_emails: true
      detect_phones: true
      detect_ssn: true
      detect_credit_cards: true
      detect_ip_addresses: false
      detect_api_keys: true
      detect_language: false  # Requires langdetect package
      detect_encoding_issues: true
      detect_special_tokens: true
      detect_repetition: true
      repetition_ngram_size: 3
      repetition_threshold: 0.3
      compute_quality_score: true
